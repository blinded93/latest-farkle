(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{76:function(e,t,a){e.exports=a(92)},81:function(e,t,a){},82:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),o=(a(81),a(82),a(14)),i=a(15),u=a(18),s=a(16),m=a(19),d=a(98),f=a(97),E=a(70),p=a(103),g=a(10),h=a(94),y=a(6),b=a(35),v=function(e){var t=function(e){return Object.values(e).filter(function(e){return 0!==e})}(e);return[O(e,t)||A(t)+k(t)+w(e,t)+N(e,t),t]},O=function(e,t){if(function(e){return Object.values(e).reduce(function(e,t){return e+t},0)}(e)<6)return!1;var a=C(t)||S(t)||j(t)||T(t)||D(t);return a&&t.splice(0,6),a},C=function(e){return 2===e.length&&e.indexOf(3)>=0?2500:0},S=function(e){return 2===e.length&&e.indexOf(4)>=0?1500:0},j=function(e){return 3===e.length&&e[0]===e[1]?1500:0},T=function(e){return 6===e.length?1500:0},D=function(e){return 1===e.length?3e3:0},A=function(e){var t=e.indexOf(5),a=t>=0?2e3:0;return a&&e.splice(t,1),a},k=function(e){var t=e.indexOf(4),a=t>=0?1e3:0;return a&&e.splice(t,1),a},w=function(e,t){var a,n=Object.values(e).indexOf(3),r=t.indexOf(3);switch(n){case 0:a=300;break;case 1:case 2:case 3:case 4:case 5:a=100*(n+1);break;default:a=0}return a&&t.splice(r,1),a},N=function(e,t){var a={one:100,five:50},n=0;return Object.keys(a).forEach(function(r){var c=e[r],l=t.indexOf(c);c>0&&c<3&&(n+=c*a[r],t.splice(l,1))}),n},L=function(e,t){return e.map(function(e,a){return t&&t.includes(a)?e:{0:"one",1:"two",2:"three",3:"four",4:"five",5:"six"}[Math.round(0+5*Math.random()).toString()]})},P=function(e){var t={one:0,two:0,three:0,four:0,five:0,six:0};return e.forEach(function(e){return t[e]+=1}),t},x=function(e){var t=P(e),a=v(t),n=Object(b.a)(a,2),r=n[0];return n[1].length>0?0:r},I=function(e){var t=P(e),a=v(t);return Object(b.a)(a,1)[0]},G=function(e,t){return{type:"MODAL_SHOW",modalType:e,info:t}},_=function(){return{type:"MODAL_CLOSE"}},R=a(40),F=function(e){return{type:"AUTH_SUCCESS",user:e}},U=function(e){return{type:"AUTH_FAILURE",errors:e}},M=function(e){return{type:"CREATE_SCORECARDS",players:e}},B=function(e,t,a){var n=e.id,r=e.player,c=e.score;return function(e){if(t&&n)return fetch("/scorecards/".concat(n),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t},body:JSON.stringify({score:c,player:r})}).then(function(e){return e.json()}).then(function(t){return e(H(c,r,a))}).catch(function(t){return e(U(t))});e(H(c,r,a))}},H=function(e,t,a){var n=" scored ".concat(e," points!");return function(r){a||r(G("TurnChangeModal",n)),r({type:"UPDATE_SCORECARD",score:e,player:t}),r({type:"RESET_ALL"})}},z=function(e,t){return{type:"LOAD_GAMES",games:e,pagy:t}},J=function(e){return{type:"LOAD_ERROR",error:e}},W=function(e){return{type:"NEW_GAME",gameData:e}},K=function(e,t,a,n){return function(r){if(a&&e.id)return fetch("/games/".concat(e.id),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:a},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){r(n)});r(n)}},Y=function(e,t,a){var n=e.game,r=Object(R.a)(e,["game"]),c={type:"FINISH_GAME",winner:r.winner};return function(e){if(e(K(n,r,t,c)),a){var l=" scored ".concat(a.score," points and wins!");e(B(a,t,!0)),e(G("TurnChangeModal",l))}}},q=function(e,t){return function(a){a(Q()),new Promise(function(n,r){var c,l=setInterval(function(){c=L(e,t),a({type:"SAVE_DICE",newDice:c})},50);setTimeout(function(){clearInterval(l);var e=c.filter(function(e,a){return!t.includes(a)});I(e)?n(c):r(c)},1e3)}).then(function(e){return a({type:"UPDATE_FINAL_DICE"})}).catch(function(e){a(G("TurnChangeModal"," farkled!")),a({type:"FARKLE"})})}},Q=function(){return{type:"INCREMENT_ROLL_COUNT"}},V=a(7),X=a(21);var Z=function(e,t){var a={};for(var n in t)""!==t[n]&&(a[n]=t[n]);return Object(X.a)({},e.toLowerCase(),a)},$=function(e){return e&&0===Object.keys(e).length},ee=Object(y.b)(function(e){return{turn:e.turn,currentGame:e.currentGame}},{rollDice:q,deselectAll:function(){return{type:"DESELECT_ALL"}},updateTotal:function(){return{type:"UPDATE_TOTAL"}}})(function(e){var t=e.turn,a=t.dice,n=t.selectedDiceIndexes,c=t.savedDice,l=t.rollCount,o=e.currentGame.inProgress,i=e.rollDice,u=e.updateTotal,s=e.deselectAll,m=a.filter(function(e,t){return n.includes(t)}),d=x(m),f=Object(g.a)(new Set([].concat(Object(g.a)(n),Object(g.a)(c)))),E=function(e,t){return 6===f.length&&d?e:t};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(e){0===l&&s(),6===f.length?(s(),i(a,[])):i(a,f),u()},style:{width:"47%"},variant:E("success","outline-success"),disabled:!o||0!==l&&!(!$(n)&&d)&&(!(!$(n)&&d)||void 0)},E("Roll Again!","Roll")))}),te=Object(y.b)(function(e){var t=e.scorecards[e.currentGame.currentPlayer].id;return{inProgress:e.currentGame.inProgress,lastTurn:e.currentGame.lastTurn,currentPlayer:e.currentGame.currentPlayer,totalScore:e.turn.totalScore+e.turn.selectedScore,scorecardId:t}},{updateScorecard:B})(function(e){var t=e.updateScorecard,a=e.currentPlayer,n=e.scorecardId,c=e.totalScore,l=e.lastTurn,o=e.inProgress;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(e){c>=500&&t({player:a,id:n,score:c},localStorage.token)},style:{width:"47%"},variant:"outline-danger",disabled:!o||l||c<500},"Bank"))}),ae=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,null),r.a.createElement(te,null))},ne=a(104),re=a(95),ce=a(96),le=Object(y.b)(function(e){return{lastTurn:e.currentGame.lastTurn,scorecards:e.scorecards,currentPlayer:e.currentGame.currentPlayer}},{updateScoreToBeat:function(e){return{type:"SCORE_TO_BEAT",scoreToBeat:e}},changeToLastTurn:function(){return{type:"LAST_TURN"}}})(function(e){var t=e.scorecards,a=e.currentPlayer,c=e.lastTurn,l=e.updateScoreToBeat,o=e.changeToLastTurn;return Object(n.useEffect)(function(){if(!c&&t[a].score>=1e4&&o(),c){var e=t.player1,n=t.player2,r=Math.abs(e.score-n.score);l(r)}},[c,t,l,o,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{variant:"pills",activeKey:a,id:"player-scorecards",as:h.a},Object.keys(t).map(function(e,a){var n=t[e],c=n.name,l=n.score,o=n.scoresPerTurn;return r.a.createElement(re.a,{key:a,eventKey:"player".concat(a+1),title:"".concat(c," (").concat(l,")")},r.a.createElement(ce.a,{borderless:!0,size:"sm",className:"mt-2 text-center"},r.a.createElement("tbody",null,function(e){return Object(g.a)(Array(7)).map(function(t,a){return r.a.createElement("tr",{key:"row-".concat(a)},r.a.createElement("td",{className:"scores"},e[a]),r.a.createElement("td",{className:"scores"},e[a+7]),r.a.createElement("td",{className:"scores"},e[a+14]))})}(o),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",{className:"text-right"},r.a.createElement("span",{className:"font-weight-bold"},"Total:"),"  ".concat(l))))))})))}),oe=Object(y.b)(function(e){var t=e.turn,a=e.currentGame,n=e.scorecards;return{lastPlayer:a.lastPlayer,scorecards:n,gameId:a.id,winner:a.winner,currentPlayer:a.currentPlayer,scoreToBeat:t.scoreToBeat,finalDice:t.finalDice,unsavedDice:t.unsavedDice,selectedDiceIndexes:t.selectedDiceIndexes,savedDice:t.savedDice,selectedScore:t.selectedScore,totalScore:t.totalScore}},{updateScore:function(e){return{type:"UPDATE_SCORE",score:e}},finishGame:Y})(function(e){var t=e.finalDice,a=e.selectedDiceIndexes,c=e.selectedScore,l=e.totalScore,o=e.updateScore,i=e.scoreToBeat,u=e.finishGame,s=e.currentPlayer,m=e.winner,d=e.unsavedDice,f=e.scorecards,E=e.gameId,p=e.lastPlayer,g=f[s].id,h=c+l,y=m?"".concat(f[m].name," won!"):"Turn Score: ".concat(h);return Object(n.useEffect)(function(){if(t[0]){var e=function(e){return e.map(function(e){return t[e]})},n=x(e(a));if(o(n),i&&s===p){var r=I(e(d))+h,c={player:s,score:r,id:g};r>i&&u({winner:s,in_progress:!1,game:{id:E},current_player:s},localStorage.token,c)}}},[o,s,u,h,g,a,t,i,d,E,p]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"text-danger"},y," \xa0\xa0",r.a.createElement("small",null,p&&!m&&"Last Turn!")))}),ie=Object(y.b)(function(e){return{savedDice:e.turn.savedDice,inProgress:e.currentGame.inProgress,rollCount:e.turn.rollCount,color:e.scorecards[e.currentGame.currentPlayer].color}},{selectDice:function(e){return{type:"SELECT_DICE",diceIndex:e}},deselectDice:function(e){return{type:"DESELECT_DICE",diceIndex:e}}})(function(e){var t=e.id,a=e.num,n=e.selectDice,c=e.savedDice,l=e.deselectDice,o=e.diceState,i=e.rollCount,u=e.color,s=e.inProgress,m=Number(t.split("-")[1]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{onClick:function(){i>0&&s&&function(){var e=parseInt(t.match(/\d/)[0]);"dice-on"===o?n(m):"dice-off"!==o||c.includes(e)||l(m)}()},style:{animationName:o,color:"".concat(u)},className:"hvr-grow-rotate dice fas fa-dice-".concat(a),id:t}))}),ue=Object(y.b)(function(e){return{dice:e.turn.dice,diceState:e.turn.diceState}})(function(e){var t=e.dice,a=e.diceState,n=e.boardState,c=e.positions,l="desktop"===n?f.a:E.a,o=a.slice(c[0],c[1]);return r.a.createElement(r.a.Fragment,null,t.slice(c[0],c[1]).map(function(e,t){return r.a.createElement(l,{key:t+c[0]},r.a.createElement(ie,{diceState:o[t],num:e,id:"dice-".concat(t+c[0])}))}))}),se=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(E.a,null),r.a.createElement(ue,{boardState:"mobile",positions:[0,3]}),r.a.createElement(E.a,null)),r.a.createElement(f.a,{className:"mt-3"},r.a.createElement(E.a,null),r.a.createElement(ue,{boardState:"mobile",positions:[3]}),r.a.createElement(E.a,null)),r.a.createElement(f.a,{className:"mt-3"},r.a.createElement(E.a,null,r.a.createElement(oe,null),r.a.createElement(le,null))),r.a.createElement(p.a,{fixed:"bottom",expand:"sm",bg:"dark",variant:"dark"},r.a.createElement(ae,null)))},me=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(E.a,{xl:2,lg:2,md:1,sm:1,xs:0}),r.a.createElement(E.a,{className:"sm-game-left",xl:1,lg:1,md:2,sm:2,xs:3},r.a.createElement(ue,{boardState:"desktop",positions:[0]})),r.a.createElement(E.a,{xl:7,lg:7,md:8,sm:8,xs:8,className:"ml-3"},r.a.createElement(oe,null),r.a.createElement(le,null),r.a.createElement("div",{className:"mt-3 d-flex justify-content-between"},r.a.createElement(ae,null))),r.a.createElement(E.a,{xs:1})))},de=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={width:window.innerWidth},a.updateWidth=function(){return a.setState({width:window.innerWidth})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWidth)}},{key:"render",value:function(){var e=this.props.currentGame,t=this.state.width;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,t<560?r.a.createElement(se,{currentGame:e}):r.a.createElement(me,{currentGame:e})))}}]),t}(n.Component),fe=Object(y.b)(function(e){return{currentGame:e.currentGame}})(de),Ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).threeDiceCol=function(e,t){return r.a.createElement(E.a,{className:"text-right pr-3"},r.a.createElement("i",{className:"rules-dice fas fa-dice-".concat(e)}),"\xa0",r.a.createElement("i",{className:"rules-dice fas fa-dice-".concat(e)}),"\xa0",r.a.createElement("i",{className:"rules-dice fas fa-dice-".concat(e)}),"\xa0 = ",t," pts.")},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement("div",{className:"pb-2 text-center"},r.a.createElement("u",{className:"h2"},"Rules")),r.a.createElement(f.a,null,r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement(E.a,null,r.a.createElement("div",{className:"pb-2 text-center"},r.a.createElement("b",{className:"h4"},"Scoring")))),r.a.createElement(f.a,null,r.a.createElement(E.a,{className:"text-right"},r.a.createElement("i",{className:"rules-dice fas fa-dice-five"})," FIVES = 50 points  \xa0"),r.a.createElement(E.a,{className:"pl-4"},r.a.createElement("i",{className:"rules-dice fas fa-dice-one"})," ONES = 100 points")),r.a.createElement(f.a,null,this.threeDiceCol("one",300),r.a.createElement(E.a,{className:"border-left pl-3"},"4 of any number = 1,000 pts.")),r.a.createElement(f.a,null,this.threeDiceCol("two",200),r.a.createElement(E.a,{className:"border-left pl-3"},"5 of any number = 2,000 pts.")),r.a.createElement(f.a,null,this.threeDiceCol("three",300),r.a.createElement(E.a,{className:"border-left pl-3"},"6 of any number = 3,000 pts.")),r.a.createElement(f.a,null,this.threeDiceCol("four",400),r.a.createElement(E.a,{className:"border-left pl-3"},"1-6 straight = 1,500 pts.")),r.a.createElement(f.a,null,this.threeDiceCol("five",500),r.a.createElement(E.a,{className:"border-left pl-3"},"Three pairs = 1,500 pts.")),r.a.createElement(f.a,null,this.threeDiceCol("six",600),r.a.createElement(E.a,{className:"border-left pl-3"},"Four of any number",r.a.createElement("br",null)," \xa0\xa0\xa0\xa0\xa0 with a pair = 1,500 pts.")),r.a.createElement(f.a,null,r.a.createElement(E.a,null),r.a.createElement(E.a,{className:"border-left pl-3"},"Two triplets = 2,500 pts."))),r.a.createElement(E.a,null,r.a.createElement("h4",null,"Objective"),r.a.createElement("p",null,"To score points through systematic rolling of the dice."),r.a.createElement("h5",null,"How to Play"),r.a.createElement("p",null,"The first player rolls 6 dice and selects (sets aside) any scoring dice that appear. Players can continue to roll the remaining dice for more points, setting aside a minimum of 1 scoring dice each turn. 500 points must be collected before points can be added to scorecard (banked). If a roll does not contain any scoring dice, the player has 'FARKLED' and loses points and turn.")))))}}]),t}(n.Component),pe=Object(y.b)(function(e){return e},{})(Ee),ge=Object(y.b)(null,{modalShow:G})(function(e){var t=e.gameId,a=e.modalShow;return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:"text-right"},r.a.createElement("span",{className:"pointer",style:{fontSize:"20px"},onClick:function(e){e.stopPropagation(),a("DeleteGame",t)}},"\u2715")))}),he=function(e){var t=e.game;return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,t.id),t.scorecards.map(function(e){return r.a.createElement(n.Fragment,{key:"card-".concat(e.id)},r.a.createElement("td",{className:(a=e.name,c=t.winner,a===c?"bg-danger text-light":"")},e.name),r.a.createElement("td",null,e.score));var a,c}))},ye=a(22),be=Object(y.b)(function(e){return{games:e.games.list}},{updateScorecards:function(e){return{type:"UPDATE_SCORECARDS",scorecards:e}},displayGame:function(e){return{type:"DISPLAY_GAME",game:e}}})(function(e){var t=e.games,a=e.updateScorecards,c=e.displayGame;return r.a.createElement(r.a.Fragment,null,!!t[0]&&t.map(function(e){return r.a.createElement(n.Fragment,{key:"game-".concat(e.id)},r.a.createElement(ye.IndexLinkContainer,{to:"/"},r.a.createElement("tr",{id:"game-".concat(e.id),onClick:function(t){return function(e){a(e.scorecards),c(e)}(e)},className:(t=e.inProgress,(t?"table-success":"table-warning")+" pointer")},r.a.createElement(he,{game:e}),r.a.createElement(ge,{gameId:e.id}))));var t}))}),ve=function(e){var t=e.getGames,a=e.games;return r.a.createElement(r.a.Fragment,null,!!a.nextPage&&r.a.createElement(h.a,{className:"text-center",variant:"outline-dark",size:"sm",onClick:function(){return t(a.nextPage,localStorage.token)}},"Load More Games"))},Oe=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.games,a=e.getGames;0===t.page&&a(1,localStorage.token)}},{key:"render",value:function(){var e=this.props,t=e.games,a=e.getGames;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,t.list[0]?r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{borderless:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Player 1"),r.a.createElement("th",null,"Score"),r.a.createElement("th",null,"Player 2"),r.a.createElement("th",null,"Score"))),r.a.createElement("tbody",null,r.a.createElement(be,null))),r.a.createElement("div",{className:"text-center"},r.a.createElement(ve,{getGames:a,games:t}))):r.a.createElement("h5",{className:"text-center"},"No games to display")))}}]),t}(n.Component),Ce=Object(y.b)(function(e){return{games:e.games}},{getGames:function(e,t){return function(a){return fetch("/games?page=".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t}}).then(function(e){var t=e.json();return e.ok?t:Promise.reject("".concat(e.statusText,", you must be logged in to do that."))}).then(function(e){var t=e.games,n=e.pagy;return a(z(t,n))}).catch(function(e){return a(J(e))})}}})(Oe),Se=a(75),je=function(e,t){return function(a){return a({type:"AUTH_REQUEST"}),fetch("/auth_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.auth_token?(localStorage.setItem("token",e.auth_token),localStorage.setItem("user",JSON.stringify(e.user)),a(F(e.user)),t&&t()):(a(U(e.errors)),localStorage.clear())})}},Te=function(e){var t=e.modalOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.LinkContainer,{to:"rules"},r.a.createElement(Se.a.Link,null,"Rules")),r.a.createElement("span",{style:{fontSize:25,color:"dark-brown"}},"|"),r.a.createElement(ye.IndexLinkContainer,{to:"/"},r.a.createElement(Se.a.Link,{onClick:function(e){return t("Login")}},"Login")),r.a.createElement(ye.IndexLinkContainer,{to:"/"},r.a.createElement(Se.a.Link,{onClick:function(e){return t("Signup")}},"Signup")))},De=function(e){var t=e.modalOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.IndexLinkContainer,{to:"/"},r.a.createElement(Se.a.Link,null,"Home")),r.a.createElement(ye.LinkContainer,{to:"rules"},r.a.createElement(Se.a.Link,null,"Rules")),r.a.createElement(ye.LinkContainer,{to:"games"},r.a.createElement(Se.a.Link,null,"Games")),r.a.createElement(Se.a.Link,{onClick:function(e){return t("Logout")}},"Logout"))},Ae=function(e){var t=e.currentUser,a=e.modalShow;return r.a.createElement(r.a.Fragment,null,0===Object.keys(t).length?r.a.createElement(Te,{modalOpen:a}):r.a.createElement(De,{modalOpen:a}))},ke=a(101),we=a(31),Ne=Object(we.o)(Object(y.b)(null,{logout:function(){return function(e){return localStorage.clear(),e({type:"LOGOUT"})}}})(function(e){var t=e.logout,a=e.modalClose;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a.Body,null,r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"mb-2"},"Are you sure you want to logout?"),r.a.createElement(h.a,{className:"mr-1",size:"sm",variant:"outline-danger",onClick:function(n){return e.history.replace("/"),t(),void a()}},"Logout"),r.a.createElement(h.a,{className:"ml-1",size:"sm",variant:"outline-dark",onClick:a},"Cancel"))))})),Le=a(102),Pe=function(e){var t=e.playerNumber,a=e.onChange,n={blue:"primary",red:"danger",green:"success",yellow:"warning",teal:"info",black:"dark"};return r.a.createElement(r.a.Fragment,null,Object.keys(n).map(function(e){return r.a.createElement(Le.a.Check,{inline:!0,key:e,className:"badge pl-1 pt-1 pb-1 bg-".concat(n[e]),type:"radio",name:"".concat(t,".color"),value:e,onChange:function(e){return a(e)}})}))},xe=function(e){var t=e.onChange,a=e.onSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{id:"new-game-form",onSubmit:function(e){return a(e)}},r.a.createElement(Le.a.Group,null,r.a.createElement(Le.a.Control,{name:"player1.name",type:"text",placeholder:"Player 1",onChange:function(e){return t(e)}})),r.a.createElement(Le.a.Label,null,"Player 1 color:"),r.a.createElement(Le.a.Group,null,r.a.createElement(Pe,{playerNumber:"player1",onChange:t})),r.a.createElement(Le.a.Group,null,r.a.createElement(Le.a.Control,{name:"player2.name",type:"text",placeholder:"Player 2",onChange:function(e){return t(e)}})),r.a.createElement(Le.a.Label,null,"Player 2 color:"),r.a.createElement(Le.a.Group,null,r.a.createElement(Pe,{playerNumber:"player2",onChange:t}))))},Ie=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={player1:{name:"",color:""},player2:{name:"",color:""}},a.onChange=function(e){var t=e.target.name.split("."),n=Object(b.a)(t,2),r=n[0],c=n[1];a.setState(Object(X.a)({},r,Object(V.a)({},a.state[r],Object(X.a)({},c,e.target.value))))},a.onSubmit=function(e){e.preventDefault(),(0,a.props.createGame)(a.state,localStorage.token),a.props.modalClose()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a.Header,{closeButton:!0},r.a.createElement("h5",null,"New Game")),r.a.createElement(ke.a.Body,null,r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"mb-2"},r.a.createElement(xe,{onChange:this.onChange,onSubmit:this.onSubmit})))),r.a.createElement(ke.a.Footer,null,r.a.createElement(h.a,{form:"new-game-form",size:"sm",type:"submit",variant:"outline-success"},"Create Game")))}}]),t}(n.Component),Ge=Object(y.b)(function(e){return{currentUser:e.auth.currentUser}},{createGame:function(e,t){return function(a){if(t)return fetch("/games",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(t){t.scorecards;var n=Object(R.a)(t,["scorecards"]);a(W(n)),a(function(e){return{type:"ADD_GAME",game:e}}(t)),a(M(e))});a(W({id:"00000"})),a(M(e))}}})(Ie),_e=Object(y.b)(function(e){return{gameId:e.modal.modalInfo}},{deleteGame:function(e,t){return function(a){return fetch("/games/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t}}).then(function(e){var t=e.json();return e.ok?t:Promise.reject(e.statusText)}).then(function(e){return a({type:"DELETE_GAME",gameId:e.id})}).catch(function(e){return a(J(e))})}},modalClose:_})(function(e){var t=e.gameId,a=e.deleteGame,n=e.modalClose;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a.Header,{closeButton:!0}),r.a.createElement(ke.a.Body,null,r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"mb-2"},"Delete Game ID ",t,"?"),r.a.createElement(h.a,{className:"mr-1",size:"sm",variant:"outline-danger",onClick:function(){a(t,localStorage.token),n()}},"Delete"))))}),Re=Object(y.b)(function(e){return{game:e.currentGame,dice:e.turn.dice,currentPlayer:e.currentGame.currentPlayer,scorecards:e.scorecards}},{completeTurnAndRoll:function(e,t,a){return function(n){n(function(e,t){var a="player1"===e.currentPlayer?"player2":"player1",n={current_player:a,last_turn:!!e.lastTurn};e.lastTurn&&(n.last_player=a);var r={type:"CHANGE_CURRENT_PLAYER"};return function(a){a(K(e,n,t,r))}}(t,a)),n({type:"RESET_ALL"}),n(q(e,[]))}},modalClose:_})(function(e){var t=e.scorecards,a=e.currentPlayer,n=e.completeTurnAndRoll,c=e.modalClose,l=e.dice,o=e.game,i=t[Object.keys(t).filter(function(e){return e!==a})[0]];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{block:!0,variant:"outline-success",onClick:function(){c(),setTimeout(function(){n(l,o,localStorage.token)},100)}},i.name," Roll"))}),Fe=Object(y.b)(function(e){return{lastPlayer:e.currentGame.lastPlayer,gameId:e.currentGame.id,lastTurn:e.currentGame.lastTurn,winner:e.currentGame.winner,modalInfo:e.modal.modalInfo,currentPlayer:e.currentGame.currentPlayer,scorecards:e.scorecards}},{finishGame:Y,modalClose:_})(function(e){var t=e.scorecards,a=e.currentPlayer,c=e.modalInfo,l=e.gameId,o=e.lastTurn,i=e.winner,u=e.finishGame,s=e.modalClose,m=e.lastPlayer;return Object(n.useEffect)(function(){if(o&&c.includes("farkle")){var e="player1"===a?"player2":"player1",t=c.includes("farkle")?e:a;u({winner:t,game:{id:l},in_progress:!1},localStorage.token)}},[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a.Header,{closeButton:!0}),r.a.createElement(ke.a.Body,{className:"text-center"},r.a.createElement("h5",null,t[o&&i?m:a].name," ",c),o&&c.includes("points!")&&r.a.createElement("h6",{className:"text-danger"},"Last Chance!")),r.a.createElement(ke.a.Footer,null,i?r.a.createElement(h.a,{block:!0,variant:"outline-info",onClick:s},"Close"):r.a.createElement(Re,null)))}),Ue=function(e){var t={Logout:Ne,NewGame:Ge,TurnChangeModal:Fe,DeleteGame:_e},a=e.modalClose,n=t[e.modalType];return r.a.createElement(r.a.Fragment,null,r.a.createElement(n,{modalClose:a}))},Me=a(99),Be=function(e){var t=e.onChange,a=e.onSubmit,c=e.fields,l=e.errors,o=Object(n.useState)("password"),i=Object(b.a)(o,2),u=i[0],s=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return a(e,c)}},r.a.createElement(Le.a.Group,null,r.a.createElement(Le.a.Control,{isInvalid:l.length>0,type:"text",name:"identifier",onChange:t,placeholder:"Username or Email"})),r.a.createElement(Me.a,{className:"form-group"},r.a.createElement(Le.a.Control,{isInvalid:l.length>0,type:u,name:"password",onChange:t,placeholder:"Password"}),r.a.createElement(Me.a.Append,null,r.a.createElement(Me.a.Text,{onClick:function(){s("password"===u?"text":"password")}},"password"===u?r.a.createElement("i",{className:"fas fa-eye"}):r.a.createElement("i",{className:"far fa-eye"}))),r.a.createElement(Le.a.Control.Feedback,{type:"invalid"},l)),r.a.createElement(h.a,{block:!0,variant:"outline-dark",type:"submit"},"Login")))},He=function(e){var t=e.onChange,a=e.onSubmit,n=e.fields,c=e.errors,l=function(e){return!!c&&c[e]};return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return a(e,n)}},r.a.createElement(Le.a.Group,null,r.a.createElement(Le.a.Control,{required:!0,isInvalid:l("username"),type:"text",name:"username",onChange:t,placeholder:"Username"}),r.a.createElement(Le.a.Control.Feedback,{type:"invalid"},"Username ",l("username"))),r.a.createElement(Le.a.Group,null,r.a.createElement(Le.a.Control,{required:!0,isInvalid:l("email"),type:"email",name:"email",onChange:t,placeholder:"Email"}),r.a.createElement(Le.a.Control.Feedback,{type:"invalid"},"Email ",l("email"))),r.a.createElement(Le.a.Group,null,r.a.createElement(Le.a.Control,{required:!0,isInvalid:l("password"),type:"password",name:"password",onChange:t,placeholder:"Password"}),r.a.createElement(Le.a.Control.Feedback,{type:"invalid"},"Password ",l("password"))),r.a.createElement(h.a,{block:!0,variant:"outline-dark",type:"submit"},"Signup")))},ze=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={username:"",email:"",identifier:"",password:""},a.onChange=function(e){a.setState(Object(X.a)({},e.target.name,e.target.value))},a.onSubmit=function(e,t){var n=a.props,r=n.createUser,c=n.authenticate,l=n.modalClose;e.preventDefault(),t.login?c(t.login,l):r(t.signup,l)},a.formComponent=function(e){var t=a.props,n=t.errors,c=t.modalType;if(e){var l={Login:Be,Signup:He}[e];return r.a.createElement(l,{fields:Z(c,a.state),onChange:a.onChange,onSubmit:a.onSubmit,errors:n})}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.modalType;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a.Header,{closeButton:!0},r.a.createElement("strong",null,e)),r.a.createElement(ke.a.Body,null,this.formComponent(e)))}}]),t}(n.Component),Je=Object(y.b)(function(e){return e.auth},{createUser:function(e,t){var a=e;return function(n){return fetch("/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){0===Object.keys(e.errors).length?n(je({identifier:a.email,password:a.password},t)):n(U(e.errors))})}},authenticate:je})(ze),We=function(e){var t={Login:Je,Signup:Je,NewGame:Ue,Logout:Ue,TurnChangeModal:Ue,DeleteGame:Ue}[e.modalType];return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,e))},Ke=Object(y.b)(function(e){return e.modal},{modalShow:G,modalClose:_})(function(e){var t=e.modalShown,a=e.modalClose;return r.a.createElement(ke.a,{backdrop:"static",show:t,onHide:a,size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(We,e))}),Ye=a(100),qe=function(e){var t=e.modalOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a.Brand,null,r.a.createElement(ye.IndexLinkContainer,{to:"/"},r.a.createElement(Se.a.Link,{className:"d-inline"},"Farkle")),r.a.createElement("small",null,r.a.createElement(Ye.a,{className:"ml-2 pointer",onClick:function(e){return t("NewGame")},variant:"secondary"},"New"))))},Qe=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.verifyUser;localStorage.user&&e(localStorage.token)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,a=e.errors,n=e.modalShow;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{fixed:"top",collapseOnSelect:!0,expand:"sm",bg:"dark",variant:"dark"},r.a.createElement(Se.a,{className:"mr-auto"},r.a.createElement(qe,{modalOpen:n})),r.a.createElement(p.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(Se.a,{className:"ml-auto"},r.a.createElement(Ae,{currentUser:t,modalShow:n})))),r.a.createElement(Ke,{errors:a}))}}]),t}(n.Component),Ve=Object(y.b)(function(e){return e.auth},{modalShow:G,authSuccess:F,verifyUser:function(e){return function(t){return t({type:"AUTH_REQUEST"}),fetch("/verify_user",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:e}}).then(function(e){return e.json()}).then(function(e){e.errors?localStorage.clear():t(F(e.user))})}}})(Qe),Xe=a(38);var Ze=function(){return r.a.createElement(Xe.BrowserRouter,null,r.a.createElement(Ve,null),r.a.createElement(we.g,null,r.a.createElement(we.d,{exact:!0,path:"/",component:fe}),r.a.createElement(we.d,{path:"/rules",component:pe}),r.a.createElement(we.d,{path:"/games",component:Ce})))},$e=a(33),et=a(74),tt={isAuthenticated:!1,isAuthenticating:!1,currentUser:{},errors:[]},at={modalShown:!1,modalType:"",modalInfo:""},nt={id:null,inProgress:!0,winner:null,currentPlayer:"player1",lastPlayer:null,lastTurn:!1},rt={player1:{id:null,name:"Player1",color:"dark",score:0,scoresPerTurn:[]},player2:{id:null,name:"Player2",color:"dark",score:0,scoresPerTurn:[]}},ct={rollCount:0,selectedDiceIndexes:[],savedDice:[],unsavedDice:[0,1,2,3,4,5],totalScore:0,selectedScore:0,dice:["one","two","three","four","five","six"],finalDice:[],scoreToBeat:0,diceState:["dice-on","dice-on","dice-on","dice-on","dice-on","dice-on"]},lt={areLoaded:!1,error:"",page:0,nextPage:2,list:[]},ot=Object($e.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_REQUEST":return Object(V.a)({},e,{isAuthenticating:!0});case"AUTH_SUCCESS":return Object(V.a)({},e,{isAuthenticated:!0,isAuthenticating:!1,currentUser:t.user});case"AUTH_FAILURE":return Object(V.a)({},tt,{errors:t.errors||[]});case"LOGOUT":return tt;default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL_SHOW":return{modalShown:!0,modalType:t.modalType,modalInfo:t.info};case"MODAL_CLOSE":return Object(V.a)({},e,{modalShown:!1});default:return e}},currentGame:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_GAME":var a=t.gameData.id||e.id;return Object(V.a)({},e,{id:a});case"CHANGE_CURRENT_PLAYER":var n="player1"===e.currentPlayer?"player2":"player1";return Object(V.a)({},e,{currentPlayer:n});case"DISPLAY_GAME":return t.game;case"LAST_TURN":var r="player1"===e.currentPlayer?"player2":"player1";return Object(V.a)({},e,{lastTurn:!0,lastPlayer:r});case"FINISH_GAME":return Object(V.a)({},e,{winner:t.winner,inProgress:!1});default:return e}},scorecards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_SCORECARDS":var a=t.players,n=a.player1,r=a.player2;return{player1:Object(V.a)({},e.player1,n),player2:Object(V.a)({},e.player2,r)};case"UPDATE_SCORECARDS":return{player1:Object(V.a)({},t.scorecards[0]),player2:Object(V.a)({},t.scorecards[1])};case"UPDATE_SCORECARD":var c=t.player,l=t.score,o=[].concat(Object(g.a)(e[c].scoresPerTurn),[l]);return Object(V.a)({},e,Object(X.a)({},c,Object(V.a)({},e[c],{score:o.reduce(function(e,t){return e+t},0),scoresPerTurn:o})));default:return e}},turn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FARKLE":return Object(V.a)({},ct,{totalScore:e.totalScore,dice:e.dice,diceState:e.diceState});case"RESET_ALL":return Object(V.a)({},ct,{dice:e.dice});case"CONTINUE":return Object(V.a)({},ct,{score:e.totalScore,rollCount:e.rollCount});case"SELECT_DICE":var a=e.diceState.map(function(e,a){return a===t.diceIndex?"dice-off":e});return Object(V.a)({},e,{diceState:a,unsavedDice:e.unsavedDice.filter(function(e){return e!==t.diceIndex}),selectedDiceIndexes:[].concat(Object(g.a)(e.selectedDiceIndexes),[t.diceIndex])});case"DESELECT_DICE":var n=e.diceState.map(function(e,a){return a===t.diceIndex?"dice-on":e}),r=e.savedDice.includes(t.diceIndex)?e.selectedDiceIndexes:e.selectedDiceIndexes.filter(function(e){return e!==t.diceIndex});return Object(V.a)({},e,{diceState:n,unsavedDice:[].concat(Object(g.a)(e.unsavedDice),[t.diceIndex]),selectedDiceIndexes:r});case"DESELECT_ALL":return Object(V.a)({},e,{selectedDiceIndexes:[],savedDice:[],unsavedDice:ct.unsavedDice,diceState:ct.diceState});case"UPDATE_SCORE":return Object(V.a)({},e,{selectedScore:t.score});case"UPDATE_TOTAL":return Object(V.a)({},e,{selectedScore:0,totalScore:e.totalScore+e.selectedScore});case"SCORE_TO_BEAT":return Object(V.a)({},e,{scoreToBeat:t.scoreToBeat});case"SAVE_DICE":return Object(V.a)({},e,{selectedDiceIndexes:[],savedDice:[].concat(Object(g.a)(e.savedDice),Object(g.a)(e.selectedDiceIndexes)),finalDice:[],dice:t.newDice});case"UPDATE_FINAL_DICE":return Object(V.a)({},e,{finalDice:e.dice});case"INCREMENT_ROLL_COUNT":return Object(V.a)({},e,{rollCount:e.rollCount+1});default:return e}},games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_GAMES":return Object(V.a)({},e,{areLoaded:!0,page:t.pagy.page,nextPage:t.pagy.next,list:[].concat(Object(g.a)(e.list),Object(g.a)(t.games))});case"DELETE_GAME":return Object(V.a)({},e,{list:e.list.filter(function(e){return t.gameId!==e.id})});case"ADD_GAME":return Object(V.a)({},e,{list:[].concat(Object(g.a)(e.list),[t.game])});case"LOAD_ERROR":return Object(V.a)({},e,{areLoaded:!1,error:t.error});default:return e}}}),it=Object($e.d)(ot,Object($e.a)(et.a));l.a.render(r.a.createElement(y.a,{store:it},r.a.createElement(Ze,null)),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.05efb3b8.chunk.js.map